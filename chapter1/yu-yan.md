# 语言

## 关于Objective-C

Objective-C是iOS开发的主要语言。它是C语言的超集，提供面向对象的功能和动态运行时。Objective-C继承了C的语法，基本类型和流控制语句，并添加了定义类和方法的语法。它还为对象图管理和推向字面值提供了语言级别的支持，同时提供动态的键入和绑定，将许多责任推迟到运行时。

## 对象模型

所有事务都是对象，都有isa指针。

对象在内存中的排布可以看成一个结构体，该结构体的大小并不能动态更改。所以无法在运行时给对象增加成员变量。  
但是对象的方法都保存在类的可变区域中，方法定义的列表是一个指针的指针，可以通过修改指针指向的指针的值，实现动态的给一个类增加成员方法（**Category可以为对象增加成员方法，但是不能增加成员变量**）。

### **给对象增加成员变量**

通过**objc\_setAssociatedObject**和**objc\_getAssociatedObject**方法可以变相的给对象增加成员变量（机制不同，没有修改对象的内存结构）

**Method Swizzling（方法交换）**  
Objective-C里面提供可以**动态替换类方法或实例方法的方法**：

* class\_replaceMethod 替换类方法的定义
* method\_exchangeImplementations 交换两个方法的实现
* method\_setImplementation 设置一个方法的实现

## 动态特性（！没怎么理解）

1、动态类型  
运行时再决定对象的类型

2、动态绑定  
消息机制  
调用一个实例的方法，就是向该实例的指针发送消息，实例在收到消息后，从自身的实现中寻找响应这条消息的方法。

动态绑定所做的，就是在实例所属类确认后，将某些属性和相应的方法绑定到实例上。

3、动态加载  
根据需求加载所需要的资源，对于iOS开发来说基本就是根据不同的需求做适配。比如在Retina设备上加载@2x图，而在老的机器上加载原图。

